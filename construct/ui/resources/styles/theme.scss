@import 'defaults';
@import 'funcs';


// Mixins //


@mixin roboto {
    font-family: $font_stack;
    font-weight: $font_weight;
    font-size: $font_size;
}

@mixin roboto-light {
    font-family: $font_stack;
    font-weight: $font_weight - 100;
    font-size: $font_size;
}

@mixin roboto-medium {
    font-family: $font_stack;
    font-weight: $font_weight + 100;
    font-size: $font_size;
}

@mixin icon {
  margin: 0;
  padding: 0;
  list-style: none;
  font-family: "construct" !important;
  font-size: $font_size;
}


// Base Widgets //


QWidget {
    @include roboto;
}

*[status="alert"] {
    color: $alert;
    border-color: $alert;
}

*[status="error"] {
    color: $error;
    border-color: $error;
}

*[status="success"] {
    color: $success;
    border-color: $success;
}

*[status="info"] {
    color: $info;
    border-color: $info;
}

#icon {
    @include icon;
    background-color: $transparent;
}

#h1 {
    @include roboto;
    font-size: 24px;
}

#h2 {
    @include roboto-medium;
    font-size: 20px;
}

#h3 {
    @include roboto;
    font-size: 18px;
}

#h4 {
    @include roboto;
    font-size: 14px;
}

#h5 {
    @include roboto-medium;
    font-size: 14px;
}

#p {
    @include roboto;
    font-size: 12px;
}


// Base theme
@mixin base(
    $primary: #CC4455,
    $on_primary: #000000,
    $surface: #FFFFFF,
    $on_surface: #000000,
    $bg: $background,
    $on_bg: $on_background
) {

    background: $surface;

    * {
        color: $on_surface;
    }

    #icon {
        outline: none;
        border: 0;
        padding: 0;
        margin: 0;
    }

    QFrame#line {
        color: $bg;
    }

    QPushButton[type="text"] {
        padding: scale_px(8 16 8 16);
        border: 1 solid vary($surface, 10%);
        border-radius: 3;
    }
    QPushButton[type="text"]:disabled {
        color: vary($surface, 15%);
    }
    QPushButton[type="text"]:hover {
        color: $on_primary;
        background-color: fade-out($primary, 0.55);
        border: 1 solid fade-out($primary, 0.55);
    }
    QPushButton[type="text"]:focus {
        outline: none;
        border: 1 solid fade-out($primary, 0.25);
    }
    QPushButton[type="text"]:pressed {
        color: $on_primary;
        background-color: $primary;
    }

    QPushButton[type="icon"] {
        outline: none;
        padding: 0;
        margin: 0;
        border: 0;
        border-radius: 3;
    }
    QPushButton[type="icon"]:disabled {
        color: vary($surface, 15%);
    }
    QPushButton[type="icon"]:hover {
        color: $on_primary;
        background-color: set_alpha($primary, 0.45);
        border: 1 solid $primary;
    }
    QPushButton[type="icon"]:focus {
        outline: none;
        border: 1 solid $primary;
    }
    QPushButton[type="icon"]:pressed {
        color: $on_primary;
        background-color: $primary;
        border: 1 solid $primary;
    }

    #crumbs {
        margin: 0;
        padding: 0;
    }

    #crumb {
        margin: 0;
        padding: 0;
    }

    #crumb QPushButton {
        margin: 0;
        padding: scale_px(0 8 0 8);
        border-radius: 3;
    }
    #crumb QPushButton:disabled {
        color: vary($surface, 15%);
    }
    #crumb QPushButton:hover {
        color: $on_primary;
        background-color: fade-out($primary, 0.55);
        border: 1 solid fade-out($primary, 0.55);
    }
    #crumb QPushButton:focus {
        outline: none;
        border: 1 solid fade-out($primary, 0.25);
    }
    #crumb QPushButton:pressed {
        color: $on_primary;
        background-color: $primary;
    }
    #crumb QPushButton::menu-indicator {
        image: res_url("icons/arrow_right_solid.svg");
        width: 12;
        height: 12;
        subcontrol-origin: padding;
        subcontrol-position: center;
    }

    #crumb QPushButton::menu-indicator:pressed,
    #crumb QPushButton::menu-indicator:open {
        image: res_url("icons/arrow_down_solid.svg");
        width: 12;
        height: 12;
        subcontrol-origin: padding;
        subcontrol-position: center;
    }

    QMenu {
        background-color: $surface;
        border: 1 solid $bg;
    }

    QMenu::item {
        margin-left: 16;
        padding: scale_px(8 8 8 8);
        background-color: $transparent;
        min-width: scale_px(144);
    }

    QMenu::item:selected {
        background-color: fade-out($primary, 0.55);
        border: 1 solid fade-out($primary, 0.55);
    }

    QMenu::item:pressed {
        color: $on_primary;
        background-color: $primary;
    }
}


// Primary colored sub-theme //


QWidget[theme="primary"] {
     @include base(
        $primary_variant,
        $on_primary,
        $primary,
        $on_primary,
    );
}

QDialog[theme="primary"] {
    border: 1 solid vary($primary, 20%);
}


// Surface colored sub-theme //


QWidget[theme="surface"] {
     @include base(
        $primary,
        $on_primary,
        $surface,
        $on_surface,
    );
}

QDialog[theme="surface"] {
    border: 1 solid $background;
}

QDialog[theme="surface"]:active {
    border: 1 solid darken($background, 4);
}

// Background colored sub-theme //


QWidget[theme="background"] {
    @include base(
        $primary,
        $on_primary,
        $background,
        $on_background,
    );
}

QDialog[theme="background"] {
    border: 1 solid vary($background, 10%);
}

QDialog[theme="background"]:active {
    border: 1 solid vary($background, 20%);
}

// Alert colored sub-theme //


QWidget[theme="alert"] {
    @include base(
        vary($alert, 20%),
        $on_secondary,
        $alert,
        $on_secondary,
    );
}

QDialog[theme="alert"] {
    border: 1 solid vary($alert, 10%);
}

QDialog[theme="alert"]:active {
    border: 1 solid vary($alert, 20%);
}

// Error colored sub-theme //


QWidget[theme="error"] {
    @include base(
        vary($error, 20%),
        $on_secondary,
        $error,
        $on_secondary,
    );
}

QDialog[theme="error"] {
    border: 1 solid vary($error, 10%);
}

QDialog[theme="error"]:active {
    border: 1 solid vary($error, 20%);
}

// Success colored sub-theme //


QWidget[theme="success"] {
    @include base(
        vary($success, 20%),
        $on_secondary,
        $success,
        $on_secondary,
    );
}

QDialog[theme="success"] {
    border: 1 solid vary($success, 10%);
}

QDialog[theme="success"]:active {
    border: 1 solid vary($success, 20%);
}


// Info colored sub-theme //


QWidget[theme="info"] {
    @include base(
        vary($info, 20%),
        $on_secondary,
        $info,
        $on_secondary,
    );
}

QDialog[theme="info"] {
    border: 1 solid vary($info, 10%);
}

QDialog[theme="info"]:active {
    border: 1 solid vary($info, 20%);
}
